{% extends 'layout.html' %}

{% block content %}
  <header class="header">
    <h1>Etiquetas</h1>
  </header>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <section>
    <form class="tags-form" method="post" action="{{ url_for('audios.tag_search') }}">
      <input class="tags-form__input" type="search" name="tagName" placeholder="Buscar etiqueta..." value="{{ tag_name }}"/>
      <button class="tags-form__button" type="submit" id="search">
        <i class="bi bi-search me-2"></i>
      </button>
    </form>

    {% if tags1 %}
    <div class="tags-container">
      Etiquetas con más frases
      {% for tag in tags1 %}
        <a class="tag button" href="/audios/client-record/{{ tag._id }}">{{ tag._id.upper() }}</a>
      {% endfor %}
    </div>
    {% endif %}

    {% if tags2 %}
    <div class="tags-container">
      Etiquetas con más audios
      {% for tag in tags2 %}
        <a class="tag button" href="/audios/client-record/{{ tag._id }}">{{ tag._id.upper() }}</a>
      {% endfor %}
    </div>
    {% endif %}

    {% if tags3 %}
    <div class="tags-container">
      Etiquetas aleatorias
      {% for tag in tags3 %}
        <a class="tag button" href="/audios/client-record/{{ tag._id }}">{{ tag._id.upper() }}</a>
      {% endfor %}
    </div>
    {% endif %}

    {% if tags %}
    <div class="tags-container">
      Etiquetas encontradas:
      {% for tag in tags %}
        <a class="tag button" href="/audios/client-record/{{ tag._id }}">{{ tag._id.upper() }}</a>
      {% endfor %}
    </div>
    {% endif %}

  </section>
{% endblock %}